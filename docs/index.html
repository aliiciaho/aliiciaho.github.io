<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>aliiciaho.github.io - Global Mental Health Disorders</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

<script src="site_libs/kePrint-0.0.1/kePrint.js"></script>
<link href="site_libs/lightable-0.0.1/lightable.css" rel="stylesheet">


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">aliiciaho.github.io</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link active" href="./index.html" rel="" target="" aria-current="page">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./about.html" rel="" target="">
 <span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./map.html" rel="" target="">
 <span class="menu-text">Interactive Map</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools ms-auto">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#what-are-the-trends-in-mental-health-disorders-across-the-globe" id="toc-what-are-the-trends-in-mental-health-disorders-across-the-globe" class="nav-link active" data-scroll-target="#what-are-the-trends-in-mental-health-disorders-across-the-globe">What are the trends in Mental Health Disorders across the globe?</a></li>
  <li><a href="#dataset-used" id="toc-dataset-used" class="nav-link" data-scroll-target="#dataset-used">Dataset Used</a></li>
  <li><a href="#mental-health-disorder-trend-for-each-country" id="toc-mental-health-disorder-trend-for-each-country" class="nav-link" data-scroll-target="#mental-health-disorder-trend-for-each-country">Mental Health Disorder trend for each country</a></li>
  <li><a href="#alcohol-use-disorder" id="toc-alcohol-use-disorder" class="nav-link" data-scroll-target="#alcohol-use-disorder">Alcohol Use Disorder</a></li>
  <li><a href="#limitations" id="toc-limitations" class="nav-link" data-scroll-target="#limitations">Limitations</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Global Mental Health Disorders</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="what-are-the-trends-in-mental-health-disorders-across-the-globe" class="level1">
<h1>What are the trends in Mental Health Disorders across the globe?</h1>
<p>Mental Health refers to “mental well-being that enables people to cope with the stresses of life, realize their abilities, learn well and work well, and contribute to their community” (World Health Organization, 2022b). Mental health disorders are “characterized by a clinically significant disturbance in an individual’s cognition, emotional regulation, or behaviour” (World Health Organization, 2022a). There are a multitude of mental health disorders that exist. On this website, the data analysed are focused on 7 Mental Health Disorders — Alcohol use disorder, Anxiety disorder, Bipolar disorder, Depression, Drug use disorder, Eating disorder and Schizophrenia.</p>
<p>A study by researchers from Harvard Medical School and the University of Queensland have found that one out of every two people in the world will develop a mental health disorder in their lifetime (Queensland Brain Institute, 2023). This shows how prevalent mental health disorders have been in recent years. It is crucial to find out the main type and cause of mental health disorders in order to deal with them effectively. The current treatments used to deal with these disorder have not been very effective, hence data in this area of study will allow for greater ease of finding an effective treatment (Queensland Brain Institute, 2023).</p>
<p>This website provides a visualisation for Mental Health Disorders across the globe. It is meant to bring awareness to the mental health issues that people experience, albeit the small percentage it seems to take up of the whole population. It is important to note that not all who suffer from mental health disorders seek help and are being reported in the dataset.</p>
</section>
<section id="dataset-used" class="level1">
<h1>Dataset Used</h1>
<p>The dataset used includes the columns:</p>
<ul>
<li>Index: A unique number attached to each observation</li>
<li>Entity: Country name</li>
<li>Code: Country Code</li>
<li>Year: Year of data observed</li>
<li>Schizophrenia, Bipolar disorder, Eating disorders, Anxiety Disorders, Drug use Disorders, Depression, Alcohol Use Disorders: Percenatge of people reported to have the specific mental health disorder</li>
</ul>
<div class="cell">
<div class="cell-output-display">
<table class="table table-hover table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: right;" data-quarto-table-cell-role="th">Index</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Entity</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Code</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Year</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Schizophrenia</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Bipolar_Disorder</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Eating_Disorder</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Anxiety_Disorder</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Druguse_Disorder</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Depression</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Alcoholuse_Disorder</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">0</td>
<td style="text-align: left;">Afghanistan</td>
<td style="text-align: left;">AFG</td>
<td style="text-align: right;">1990</td>
<td style="text-align: right;">0.160560</td>
<td style="text-align: right;">0.697779</td>
<td style="text-align: right;">0.101855</td>
<td style="text-align: right;">4.828830</td>
<td style="text-align: right;">1.677082</td>
<td style="text-align: right;">4.071831</td>
<td style="text-align: right;">0.672404</td>
</tr>
<tr class="even">
<td style="text-align: right;">1</td>
<td style="text-align: left;">Afghanistan</td>
<td style="text-align: left;">AFG</td>
<td style="text-align: right;">1991</td>
<td style="text-align: right;">0.160312</td>
<td style="text-align: right;">0.697961</td>
<td style="text-align: right;">0.099313</td>
<td style="text-align: right;">4.829740</td>
<td style="text-align: right;">1.684746</td>
<td style="text-align: right;">4.079531</td>
<td style="text-align: right;">0.671768</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2</td>
<td style="text-align: left;">Afghanistan</td>
<td style="text-align: left;">AFG</td>
<td style="text-align: right;">1992</td>
<td style="text-align: right;">0.160135</td>
<td style="text-align: right;">0.698107</td>
<td style="text-align: right;">0.096692</td>
<td style="text-align: right;">4.831108</td>
<td style="text-align: right;">1.694334</td>
<td style="text-align: right;">4.088358</td>
<td style="text-align: right;">0.670644</td>
</tr>
<tr class="even">
<td style="text-align: right;">3</td>
<td style="text-align: left;">Afghanistan</td>
<td style="text-align: left;">AFG</td>
<td style="text-align: right;">1993</td>
<td style="text-align: right;">0.160037</td>
<td style="text-align: right;">0.698257</td>
<td style="text-align: right;">0.094336</td>
<td style="text-align: right;">4.830864</td>
<td style="text-align: right;">1.705320</td>
<td style="text-align: right;">4.096190</td>
<td style="text-align: right;">0.669738</td>
</tr>
<tr class="odd">
<td style="text-align: right;">4</td>
<td style="text-align: left;">Afghanistan</td>
<td style="text-align: left;">AFG</td>
<td style="text-align: right;">1994</td>
<td style="text-align: right;">0.160022</td>
<td style="text-align: right;">0.698469</td>
<td style="text-align: right;">0.092439</td>
<td style="text-align: right;">4.829423</td>
<td style="text-align: right;">1.716069</td>
<td style="text-align: right;">4.099582</td>
<td style="text-align: right;">0.669260</td>
</tr>
<tr class="even">
<td style="text-align: right;">5</td>
<td style="text-align: left;">Afghanistan</td>
<td style="text-align: left;">AFG</td>
<td style="text-align: right;">1995</td>
<td style="text-align: right;">0.160076</td>
<td style="text-align: right;">0.698695</td>
<td style="text-align: right;">0.090980</td>
<td style="text-align: right;">4.828337</td>
<td style="text-align: right;">1.728112</td>
<td style="text-align: right;">4.104207</td>
<td style="text-align: right;">0.668746</td>
</tr>
</tbody>
</table>


</div>
</div>
<p>There are a total of 168 countries that will be used in these visualisations.</p>
</section>
<section id="mental-health-disorder-trend-for-each-country" class="level1">
<h1>Mental Health Disorder trend for each country</h1>
<p>Below, you can find an interactive graph. Select the country you are interested in and its relevant graph will be produced.</p>
<iframe height="600" width="100%" frameborder="no" src="https://1ua3vn-alicia-ho.shinyapps.io/personal_app/"> </iframe>
</section>
<section id="alcohol-use-disorder" class="level1">
<h1>Alcohol Use Disorder</h1>
<div class="cell">
<div class="cell-output-display">
<table class="table table-hover table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: right;" data-quarto-table-cell-role="th">Rank</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Entity</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Code</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Year</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Alcoholuse_Disorder</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: left;">Belarus</td>
<td style="text-align: left;">BLR</td>
<td style="text-align: right;">2017</td>
<td style="text-align: right;">5.342888</td>
</tr>
<tr class="even">
<td style="text-align: right;">2</td>
<td style="text-align: left;">Russia</td>
<td style="text-align: left;">RUS</td>
<td style="text-align: right;">2017</td>
<td style="text-align: right;">4.727182</td>
</tr>
<tr class="odd">
<td style="text-align: right;">3</td>
<td style="text-align: left;">Estonia</td>
<td style="text-align: left;">EST</td>
<td style="text-align: right;">2017</td>
<td style="text-align: right;">4.713617</td>
</tr>
<tr class="even">
<td style="text-align: right;">4</td>
<td style="text-align: left;">Ukraine</td>
<td style="text-align: left;">UKR</td>
<td style="text-align: right;">2017</td>
<td style="text-align: right;">4.686883</td>
</tr>
<tr class="odd">
<td style="text-align: right;">5</td>
<td style="text-align: left;">Lithuania</td>
<td style="text-align: left;">LTU</td>
<td style="text-align: right;">2017</td>
<td style="text-align: right;">4.428001</td>
</tr>
<tr class="even">
<td style="text-align: right;">6</td>
<td style="text-align: left;">Latvia</td>
<td style="text-align: left;">LVA</td>
<td style="text-align: right;">2017</td>
<td style="text-align: right;">4.408781</td>
</tr>
<tr class="odd">
<td style="text-align: right;">7</td>
<td style="text-align: left;">Moldova</td>
<td style="text-align: left;">MDA</td>
<td style="text-align: right;">2017</td>
<td style="text-align: right;">4.074256</td>
</tr>
<tr class="even">
<td style="text-align: right;">8</td>
<td style="text-align: left;">Mongolia</td>
<td style="text-align: left;">MNG</td>
<td style="text-align: right;">2017</td>
<td style="text-align: right;">3.478108</td>
</tr>
<tr class="odd">
<td style="text-align: right;">9</td>
<td style="text-align: left;">Kazakhstan</td>
<td style="text-align: left;">KAZ</td>
<td style="text-align: right;">2017</td>
<td style="text-align: right;">3.369006</td>
</tr>
<tr class="even">
<td style="text-align: right;">10</td>
<td style="text-align: left;">Greenland</td>
<td style="text-align: left;">GRL</td>
<td style="text-align: right;">2017</td>
<td style="text-align: right;">3.086688</td>
</tr>
</tbody>
</table>


</div>
</div>
<p>At a glance, it can be observed that most of the top 10 countries with a high percentage of their population suffering from alcohol use disorder originate from Eastern European countries.</p>
<p>The country with the highest alcohol use disorders is Belarus with 5.34% of its population suffering from it in 2017. That is roughly 500,000 people out of the 9.459 million citizens of Belarus in 2017. Belarus has one of the highest alcohol consumption per capita in the world.</p>
<div class="cell">
<div class="cell-output-display">
<table class="table table-hover table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: right;" data-quarto-table-cell-role="th">Rank</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Entity</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Code</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Year</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Alcoholuse_Disorder</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">168</td>
<td style="text-align: left;">Italy</td>
<td style="text-align: left;">ITA</td>
<td style="text-align: right;">2017</td>
<td style="text-align: right;">0.462937</td>
</tr>
<tr class="even">
<td style="text-align: right;">167</td>
<td style="text-align: left;">Israel</td>
<td style="text-align: left;">ISR</td>
<td style="text-align: right;">2017</td>
<td style="text-align: right;">0.498381</td>
</tr>
<tr class="odd">
<td style="text-align: right;">165</td>
<td style="text-align: left;">Morocco</td>
<td style="text-align: left;">MAR</td>
<td style="text-align: right;">2017</td>
<td style="text-align: right;">0.574866</td>
</tr>
<tr class="even">
<td style="text-align: right;">164</td>
<td style="text-align: left;">Iran</td>
<td style="text-align: left;">IRN</td>
<td style="text-align: right;">2017</td>
<td style="text-align: right;">0.579778</td>
</tr>
<tr class="odd">
<td style="text-align: right;">163</td>
<td style="text-align: left;">Japan</td>
<td style="text-align: left;">JPN</td>
<td style="text-align: right;">2017</td>
<td style="text-align: right;">0.582880</td>
</tr>
<tr class="even">
<td style="text-align: right;">162</td>
<td style="text-align: left;">Syria</td>
<td style="text-align: left;">SYR</td>
<td style="text-align: right;">2017</td>
<td style="text-align: right;">0.621551</td>
</tr>
<tr class="odd">
<td style="text-align: right;">161</td>
<td style="text-align: left;">Yemen</td>
<td style="text-align: left;">YEM</td>
<td style="text-align: right;">2017</td>
<td style="text-align: right;">0.634413</td>
</tr>
<tr class="even">
<td style="text-align: right;">160</td>
<td style="text-align: left;">Malaysia</td>
<td style="text-align: left;">MYS</td>
<td style="text-align: right;">2017</td>
<td style="text-align: right;">0.644969</td>
</tr>
<tr class="odd">
<td style="text-align: right;">159</td>
<td style="text-align: left;">Sudan</td>
<td style="text-align: left;">SDN</td>
<td style="text-align: right;">2017</td>
<td style="text-align: right;">0.645813</td>
</tr>
<tr class="even">
<td style="text-align: right;">158</td>
<td style="text-align: left;">Palestine</td>
<td style="text-align: left;">PSE</td>
<td style="text-align: right;">2017</td>
<td style="text-align: right;">0.648970</td>
</tr>
</tbody>
</table>


</div>
</div>
<p>Most of these countries practice the religion of Islam, which considers drinking alcohol non-halal and it not allowed. This explains why these countries belong in the bottom 10 in terms of alcohol use disorders.</p>
</section>
<section id="limitations" class="level1">
<h1>Limitations</h1>
<p>The data that was curated only contains data up to 2017. Hence, it is not the most accurate representation of the current mental states of people in the world. With the emergence of the Covid-19 pandemic in 2019, research has shown that mental health has deteriorated immensely (cite). Ideally, the visualisations shown would include the most recent data for stakeholders to identify current poignant mental health issues that are on the rise.</p>
<p>Some countries are not included because of the mismatch of data between the countries in the global map and the countries in the mental health dataset.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>